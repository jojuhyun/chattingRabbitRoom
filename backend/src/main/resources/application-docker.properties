# Docker 환경 전용 설정
# 환경변수로 오버라이드 가능

# 서버 포트
server.port=${SERVER_PORT:8080}

# H2 데이터베이스 (개발용)
spring.datasource.url=${DATASOURCE_URL:jdbc:h2:mem:chattingrabbit}
spring.datasource.driver-class-name=${DATASOURCE_DRIVER:org.h2.Driver}
spring.datasource.username=${DATASOURCE_USERNAME:sa}
spring.datasource.password=${DATASOURCE_PASSWORD:}

# H2 콘솔 활성화
spring.h2.console.enabled=${H2_CONSOLE_ENABLED:true}
spring.h2.console.path=${H2_CONSOLE_PATH:/h2-console}

# JPA 설정
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:create-drop}
spring.jpa.show-sql=${JPA_SHOW_SQL:true}
spring.jpa.properties.hibernate.format_sql=${JPA_FORMAT_SQL:true}

# RabbitMQ 설정 (Docker 컨테이너 간 통신)
spring.rabbitmq.host=${RABBITMQ_HOST:rabbitmq}
spring.rabbitmq.port=${RABBITMQ_PORT:5672}
spring.rabbitmq.username=${RABBITMQ_USERNAME:admin}
spring.rabbitmq.password=${RABBITMQ_PASSWORD:admin123}
spring.rabbitmq.virtual-host=${RABBITMQ_VHOST:/}

# RabbitMQ 자동 설정
spring.rabbitmq.listener.simple.retry.enabled=${RABBITMQ_RETRY_ENABLED:true}
spring.rabbitmq.listener.simple.retry.initial-interval=${RABBITMQ_RETRY_INTERVAL:1000}
spring.rabbitmq.listener.simple.retry.max-attempts=${RABBITMQ_RETRY_MAX_ATTEMPTS:3}
spring.rabbitmq.listener.simple.retry.multiplier=${RABBITMQ_RETRY_MULTIPLIER:1.0}
spring.rabbitmq.listener.simple.retry.max-interval=${RABBITMQ_RETRY_MAX_INTERVAL:10000}

# STOMP 설정 (Docker 컨테이너 간 통신)
spring.websocket.stomp.broker-relay.host=${STOMP_HOST:rabbitmq}
spring.websocket.stomp.broker-relay.port=${STOMP_PORT:61613}
spring.websocket.stomp.broker-relay.login=${STOMP_LOGIN:admin}
spring.websocket.stomp.broker-relay.passcode=${STOMP_PASSCODE:admin123}

# CORS 설정 (Docker 환경)
cors.allowed-origins=${CORS_ALLOWED_ORIGINS:http://localhost:80,http://localhost:3000}

# 로깅 설정
logging.level.com.example.chattingrabbit=${LOG_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOG_LEVEL_WEB:DEBUG}
logging.level.org.springframework.amqp=${LOG_LEVEL_AMQP:DEBUG}

# WebSocket 설정
spring.websocket.max-text-message-size=${WS_MAX_TEXT_SIZE:8192}
spring.websocket.max-binary-message-size=${WS_MAX_BINARY_SIZE:8192}